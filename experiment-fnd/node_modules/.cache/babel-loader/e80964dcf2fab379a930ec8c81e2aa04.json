{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n * @emails oncall+relay\n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar RelayDefaultHandlerProvider = require('../handlers/RelayDefaultHandlerProvider');\n\nvar _require = require('../multi-actor-environment/ActorIdentifier'),\n    INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE = _require.INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n    assertInternalActorIndentifier = _require.assertInternalActorIndentifier;\n\nvar RelayObservable = require('../network/RelayObservable');\n\nvar wrapNetworkWithLogObserver = require('../network/wrapNetworkWithLogObserver');\n\nvar RelayOperationTracker = require('../store/RelayOperationTracker');\n\nvar registerEnvironmentWithDevTools = require('../util/registerEnvironmentWithDevTools');\n\nvar RelayFeatureFlags = require('../util/RelayFeatureFlags');\n\nvar defaultGetDataID = require('./defaultGetDataID');\n\nvar defaultRequiredFieldLogger = require('./defaultRequiredFieldLogger');\n\nvar OperationExecutor = require('./OperationExecutor');\n\nvar RelayPublishQueue = require('./RelayPublishQueue');\n\nvar RelayRecordSource = require('./RelayRecordSource');\n\nvar invariant = require('invariant');\n\nvar RelayModernEnvironment = /*#__PURE__*/function () {\n  function RelayModernEnvironment(config) {\n    var _this = this;\n\n    var _config$log, _config$requiredField, _config$UNSTABLE_defa, _config$getDataID, _config$handlerProvid, _config$scheduler, _config$isServer, _config$operationTrac;\n\n    this.configName = config.configName;\n    this._treatMissingFieldsAsNull = config.treatMissingFieldsAsNull === true;\n    var operationLoader = config.operationLoader;\n    var reactFlightPayloadDeserializer = config.reactFlightPayloadDeserializer;\n    var reactFlightServerErrorHandler = config.reactFlightServerErrorHandler;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      if (operationLoader != null) {\n        !(typeof operationLoader === 'object' && typeof operationLoader.get === 'function' && typeof operationLoader.load === 'function') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'RelayModernEnvironment: Expected `operationLoader` to be an object ' + 'with get() and load() functions, got `%s`.', operationLoader) : invariant(false) : void 0;\n      }\n\n      if (reactFlightPayloadDeserializer != null) {\n        !(typeof reactFlightPayloadDeserializer === 'function') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'RelayModernEnvironment: Expected `reactFlightPayloadDeserializer` ' + ' to be a function, got `%s`.', reactFlightPayloadDeserializer) : invariant(false) : void 0;\n      }\n    }\n\n    this.__log = (_config$log = config.log) !== null && _config$log !== void 0 ? _config$log : emptyFunction;\n    this.requiredFieldLogger = (_config$requiredField = config.requiredFieldLogger) !== null && _config$requiredField !== void 0 ? _config$requiredField : defaultRequiredFieldLogger;\n    this._defaultRenderPolicy = ((_config$UNSTABLE_defa = config.UNSTABLE_defaultRenderPolicy) !== null && _config$UNSTABLE_defa !== void 0 ? _config$UNSTABLE_defa : RelayFeatureFlags.ENABLE_PARTIAL_RENDERING_DEFAULT === true) ? 'partial' : 'full';\n    this._operationLoader = operationLoader;\n    this._operationExecutions = new Map();\n    this._network = wrapNetworkWithLogObserver(this, config.network);\n    this._getDataID = (_config$getDataID = config.getDataID) !== null && _config$getDataID !== void 0 ? _config$getDataID : defaultGetDataID;\n    this._publishQueue = new RelayPublishQueue(config.store, (_config$handlerProvid = config.handlerProvider) !== null && _config$handlerProvid !== void 0 ? _config$handlerProvid : RelayDefaultHandlerProvider, this._getDataID);\n    this._scheduler = (_config$scheduler = config.scheduler) !== null && _config$scheduler !== void 0 ? _config$scheduler : null;\n    this._store = config.store;\n    this.options = config.options;\n    this._isServer = (_config$isServer = config.isServer) !== null && _config$isServer !== void 0 ? _config$isServer : false;\n\n    this.__setNet = function (newNet) {\n      return _this._network = wrapNetworkWithLogObserver(_this, newNet);\n    };\n\n    if (process.env.NODE_ENV !== \"production\") {\n      var _require2 = require('./StoreInspector'),\n          inspect = _require2.inspect;\n\n      this.DEBUG_inspect = function (dataID) {\n        return inspect(_this, dataID);\n      };\n    }\n\n    this._missingFieldHandlers = config.missingFieldHandlers;\n    this._operationTracker = (_config$operationTrac = config.operationTracker) !== null && _config$operationTrac !== void 0 ? _config$operationTrac : new RelayOperationTracker();\n    this._reactFlightPayloadDeserializer = reactFlightPayloadDeserializer;\n    this._reactFlightServerErrorHandler = reactFlightServerErrorHandler;\n    this._shouldProcessClientComponents = config.shouldProcessClientComponents; // Register this Relay Environment with Relay DevTools if it exists.\n    // Note: this must always be the last step in the constructor.\n\n    registerEnvironmentWithDevTools(this);\n  }\n\n  var _proto = RelayModernEnvironment.prototype;\n\n  _proto.getStore = function getStore() {\n    return this._store;\n  };\n\n  _proto.getNetwork = function getNetwork() {\n    return this._network;\n  };\n\n  _proto.getOperationTracker = function getOperationTracker() {\n    return this._operationTracker;\n  };\n\n  _proto.isRequestActive = function isRequestActive(requestIdentifier) {\n    var activeState = this._operationExecutions.get(requestIdentifier);\n\n    return activeState === 'active';\n  };\n\n  _proto.UNSTABLE_getDefaultRenderPolicy = function UNSTABLE_getDefaultRenderPolicy() {\n    return this._defaultRenderPolicy;\n  };\n\n  _proto.applyUpdate = function applyUpdate(optimisticUpdate) {\n    var _this2 = this;\n\n    var dispose = function dispose() {\n      _this2._scheduleUpdates(function () {\n        _this2._publishQueue.revertUpdate(optimisticUpdate);\n\n        _this2._publishQueue.run();\n      });\n    };\n\n    this._scheduleUpdates(function () {\n      _this2._publishQueue.applyUpdate(optimisticUpdate);\n\n      _this2._publishQueue.run();\n    });\n\n    return {\n      dispose: dispose\n    };\n  };\n\n  _proto.revertUpdate = function revertUpdate(update) {\n    var _this3 = this;\n\n    this._scheduleUpdates(function () {\n      _this3._publishQueue.revertUpdate(update);\n\n      _this3._publishQueue.run();\n    });\n  };\n\n  _proto.replaceUpdate = function replaceUpdate(update, newUpdate) {\n    var _this4 = this;\n\n    this._scheduleUpdates(function () {\n      _this4._publishQueue.revertUpdate(update);\n\n      _this4._publishQueue.applyUpdate(newUpdate);\n\n      _this4._publishQueue.run();\n    });\n  };\n\n  _proto.applyMutation = function applyMutation(optimisticConfig) {\n    var subscription = this._execute({\n      createSource: function createSource() {\n        return RelayObservable.create(function (_sink) {});\n      },\n      isClientPayload: false,\n      operation: optimisticConfig.operation,\n      optimisticConfig: optimisticConfig,\n      updater: null\n    }).subscribe({});\n\n    return {\n      dispose: function dispose() {\n        return subscription.unsubscribe();\n      }\n    };\n  };\n\n  _proto.check = function check(operation) {\n    if (this._missingFieldHandlers == null || this._missingFieldHandlers.length === 0) {\n      return this._store.check(operation);\n    }\n\n    return this._checkSelectorAndHandleMissingFields(operation, this._missingFieldHandlers);\n  };\n\n  _proto.commitPayload = function commitPayload(operation, payload) {\n    this._execute({\n      createSource: function createSource() {\n        return RelayObservable.from({\n          data: payload\n        });\n      },\n      isClientPayload: true,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    }).subscribe({});\n  };\n\n  _proto.commitUpdate = function commitUpdate(updater) {\n    var _this5 = this;\n\n    this._scheduleUpdates(function () {\n      _this5._publishQueue.commitUpdate(updater);\n\n      _this5._publishQueue.run();\n    });\n  };\n\n  _proto.lookup = function lookup(readSelector) {\n    return this._store.lookup(readSelector);\n  };\n\n  _proto.subscribe = function subscribe(snapshot, callback) {\n    return this._store.subscribe(snapshot, callback);\n  };\n\n  _proto.retain = function retain(operation) {\n    return this._store.retain(operation);\n  };\n\n  _proto.isServer = function isServer() {\n    return this._isServer;\n  };\n\n  _proto._checkSelectorAndHandleMissingFields = function _checkSelectorAndHandleMissingFields(operation, handlers) {\n    var _this6 = this;\n\n    var target = RelayRecordSource.create();\n\n    var source = this._store.getSource();\n\n    var result = this._store.check(operation, {\n      handlers: handlers,\n      defaultActorIdentifier: INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n      getSourceForActor: function getSourceForActor(actorIdentifier) {\n        assertInternalActorIndentifier(actorIdentifier);\n        return source;\n      },\n      getTargetForActor: function getTargetForActor(actorIdentifier) {\n        assertInternalActorIndentifier(actorIdentifier);\n        return target;\n      }\n    });\n\n    if (target.size() > 0) {\n      this._scheduleUpdates(function () {\n        _this6._publishQueue.commitSource(target);\n\n        _this6._publishQueue.run();\n      });\n    }\n\n    return result;\n  };\n\n  _proto._scheduleUpdates = function _scheduleUpdates(task) {\n    var scheduler = this._scheduler;\n\n    if (scheduler != null) {\n      scheduler.schedule(task);\n    } else {\n      task();\n    }\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Query operation, each result of which is then\n   * normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to: environment.execute({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.execute = function execute(_ref) {\n    var _this7 = this;\n\n    var operation = _ref.operation;\n    return this._execute({\n      createSource: function createSource() {\n        return _this7.getNetwork().execute(operation.request.node.params, operation.request.variables, operation.request.cacheConfig || {}, null);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Subscription operation, each result of which is then\n   * normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to: environment.execute({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeSubscription = function executeSubscription(_ref2) {\n    var _this8 = this;\n\n    var operation = _ref2.operation,\n        updater = _ref2.updater;\n    return this._execute({\n      createSource: function createSource() {\n        return _this8.getNetwork().execute(operation.request.node.params, operation.request.variables, operation.request.cacheConfig || {}, null);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: updater\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Mutation operation, the result of which is then normalized and\n   * committed to the publish queue along with an optional optimistic response\n   * or updater.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to:\n   * environment.executeMutation({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeMutation = function executeMutation(_ref3) {\n    var _this9 = this;\n\n    var operation = _ref3.operation,\n        optimisticResponse = _ref3.optimisticResponse,\n        optimisticUpdater = _ref3.optimisticUpdater,\n        updater = _ref3.updater,\n        uploadables = _ref3.uploadables;\n    var optimisticConfig;\n\n    if (optimisticResponse || optimisticUpdater) {\n      optimisticConfig = {\n        operation: operation,\n        response: optimisticResponse,\n        updater: optimisticUpdater\n      };\n    }\n\n    return this._execute({\n      createSource: function createSource() {\n        return _this9.getNetwork().execute(operation.request.node.params, operation.request.variables, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, operation.request.cacheConfig), {}, {\n          force: true\n        }), uploadables);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: optimisticConfig,\n      updater: updater\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Query or Subscription operation responses, the result of which is\n   * then normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to:\n   * environment.executeWithSource({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeWithSource = function executeWithSource(_ref4) {\n    var operation = _ref4.operation,\n        source = _ref4.source;\n    return this._execute({\n      createSource: function createSource() {\n        return source;\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    });\n  };\n\n  _proto.toJSON = function toJSON() {\n    var _this$configName;\n\n    return \"RelayModernEnvironment(\".concat((_this$configName = this.configName) !== null && _this$configName !== void 0 ? _this$configName : '', \")\");\n  };\n\n  _proto._execute = function _execute(_ref5) {\n    var _this10 = this;\n\n    var createSource = _ref5.createSource,\n        isClientPayload = _ref5.isClientPayload,\n        operation = _ref5.operation,\n        optimisticConfig = _ref5.optimisticConfig,\n        updater = _ref5.updater;\n    var publishQueue = this._publishQueue;\n    var store = this._store;\n    return RelayObservable.create(function (sink) {\n      var executor = OperationExecutor.execute({\n        actorIdentifier: INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n        getDataID: _this10._getDataID,\n        isClientPayload: isClientPayload,\n        log: _this10.__log,\n        operation: operation,\n        operationExecutions: _this10._operationExecutions,\n        operationLoader: _this10._operationLoader,\n        operationTracker: _this10._operationTracker,\n        optimisticConfig: optimisticConfig,\n        getPublishQueue: function getPublishQueue(actorIdentifier) {\n          assertInternalActorIndentifier(actorIdentifier);\n          return publishQueue;\n        },\n        reactFlightPayloadDeserializer: _this10._reactFlightPayloadDeserializer,\n        reactFlightServerErrorHandler: _this10._reactFlightServerErrorHandler,\n        scheduler: _this10._scheduler,\n        shouldProcessClientComponents: _this10._shouldProcessClientComponents,\n        sink: sink,\n        // NOTE: Some product tests expect `Network.execute` to be called only\n        //       when the Observable is executed.\n        source: createSource(),\n        getStore: function getStore(actorIdentifier) {\n          assertInternalActorIndentifier(actorIdentifier);\n          return store;\n        },\n        treatMissingFieldsAsNull: _this10._treatMissingFieldsAsNull,\n        updater: updater\n      });\n      return function () {\n        return executor.cancel();\n      };\n    });\n  };\n\n  return RelayModernEnvironment;\n}(); // Add a sigil for detection by `isRelayModernEnvironment()` to avoid a\n// realm-specific instanceof check, and to aid in module tree-shaking to\n// avoid requiring all of RelayRuntime just to detect its environment.\n\n\nRelayModernEnvironment.prototype['@@RelayModernEnvironment'] = true;\n\nfunction emptyFunction() {}\n\nmodule.exports = RelayModernEnvironment;","map":{"version":3,"names":["_interopRequireDefault","require","_objectSpread2","RelayDefaultHandlerProvider","_require","INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE","assertInternalActorIndentifier","RelayObservable","wrapNetworkWithLogObserver","RelayOperationTracker","registerEnvironmentWithDevTools","RelayFeatureFlags","defaultGetDataID","defaultRequiredFieldLogger","OperationExecutor","RelayPublishQueue","RelayRecordSource","invariant","RelayModernEnvironment","config","_this","_config$log","_config$requiredField","_config$UNSTABLE_defa","_config$getDataID","_config$handlerProvid","_config$scheduler","_config$isServer","_config$operationTrac","configName","_treatMissingFieldsAsNull","treatMissingFieldsAsNull","operationLoader","reactFlightPayloadDeserializer","reactFlightServerErrorHandler","process","env","NODE_ENV","get","load","__log","log","emptyFunction","requiredFieldLogger","_defaultRenderPolicy","UNSTABLE_defaultRenderPolicy","ENABLE_PARTIAL_RENDERING_DEFAULT","_operationLoader","_operationExecutions","Map","_network","network","_getDataID","getDataID","_publishQueue","store","handlerProvider","_scheduler","scheduler","_store","options","_isServer","isServer","__setNet","newNet","_require2","inspect","DEBUG_inspect","dataID","_missingFieldHandlers","missingFieldHandlers","_operationTracker","operationTracker","_reactFlightPayloadDeserializer","_reactFlightServerErrorHandler","_shouldProcessClientComponents","shouldProcessClientComponents","_proto","prototype","getStore","getNetwork","getOperationTracker","isRequestActive","requestIdentifier","activeState","UNSTABLE_getDefaultRenderPolicy","applyUpdate","optimisticUpdate","_this2","dispose","_scheduleUpdates","revertUpdate","run","update","_this3","replaceUpdate","newUpdate","_this4","applyMutation","optimisticConfig","subscription","_execute","createSource","create","_sink","isClientPayload","operation","updater","subscribe","unsubscribe","check","length","_checkSelectorAndHandleMissingFields","commitPayload","payload","from","data","commitUpdate","_this5","lookup","readSelector","snapshot","callback","retain","handlers","_this6","target","source","getSource","result","defaultActorIdentifier","getSourceForActor","actorIdentifier","getTargetForActor","size","commitSource","task","schedule","execute","_ref","_this7","request","node","params","variables","cacheConfig","executeSubscription","_ref2","_this8","executeMutation","_ref3","_this9","optimisticResponse","optimisticUpdater","uploadables","response","force","executeWithSource","_ref4","toJSON","_this$configName","concat","_ref5","_this10","publishQueue","sink","executor","operationExecutions","getPublishQueue","cancel","module","exports"],"sources":["/Users/anubhavgupta/Documents/react_learning/experiment_schema_ratings/rating-frontent-with-gql/module-rating-rough/experiment-fnd/node_modules/relay-runtime/lib/store/RelayModernEnvironment.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n * @emails oncall+relay\n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar RelayDefaultHandlerProvider = require('../handlers/RelayDefaultHandlerProvider');\n\nvar _require = require('../multi-actor-environment/ActorIdentifier'),\n    INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE = _require.INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n    assertInternalActorIndentifier = _require.assertInternalActorIndentifier;\n\nvar RelayObservable = require('../network/RelayObservable');\n\nvar wrapNetworkWithLogObserver = require('../network/wrapNetworkWithLogObserver');\n\nvar RelayOperationTracker = require('../store/RelayOperationTracker');\n\nvar registerEnvironmentWithDevTools = require('../util/registerEnvironmentWithDevTools');\n\nvar RelayFeatureFlags = require('../util/RelayFeatureFlags');\n\nvar defaultGetDataID = require('./defaultGetDataID');\n\nvar defaultRequiredFieldLogger = require('./defaultRequiredFieldLogger');\n\nvar OperationExecutor = require('./OperationExecutor');\n\nvar RelayPublishQueue = require('./RelayPublishQueue');\n\nvar RelayRecordSource = require('./RelayRecordSource');\n\nvar invariant = require('invariant');\n\nvar RelayModernEnvironment = /*#__PURE__*/function () {\n  function RelayModernEnvironment(config) {\n    var _this = this;\n\n    var _config$log, _config$requiredField, _config$UNSTABLE_defa, _config$getDataID, _config$handlerProvid, _config$scheduler, _config$isServer, _config$operationTrac;\n\n    this.configName = config.configName;\n    this._treatMissingFieldsAsNull = config.treatMissingFieldsAsNull === true;\n    var operationLoader = config.operationLoader;\n    var reactFlightPayloadDeserializer = config.reactFlightPayloadDeserializer;\n    var reactFlightServerErrorHandler = config.reactFlightServerErrorHandler;\n\n    if (process.env.NODE_ENV !== \"production\") {\n      if (operationLoader != null) {\n        !(typeof operationLoader === 'object' && typeof operationLoader.get === 'function' && typeof operationLoader.load === 'function') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'RelayModernEnvironment: Expected `operationLoader` to be an object ' + 'with get() and load() functions, got `%s`.', operationLoader) : invariant(false) : void 0;\n      }\n\n      if (reactFlightPayloadDeserializer != null) {\n        !(typeof reactFlightPayloadDeserializer === 'function') ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'RelayModernEnvironment: Expected `reactFlightPayloadDeserializer` ' + ' to be a function, got `%s`.', reactFlightPayloadDeserializer) : invariant(false) : void 0;\n      }\n    }\n\n    this.__log = (_config$log = config.log) !== null && _config$log !== void 0 ? _config$log : emptyFunction;\n    this.requiredFieldLogger = (_config$requiredField = config.requiredFieldLogger) !== null && _config$requiredField !== void 0 ? _config$requiredField : defaultRequiredFieldLogger;\n    this._defaultRenderPolicy = ((_config$UNSTABLE_defa = config.UNSTABLE_defaultRenderPolicy) !== null && _config$UNSTABLE_defa !== void 0 ? _config$UNSTABLE_defa : RelayFeatureFlags.ENABLE_PARTIAL_RENDERING_DEFAULT === true) ? 'partial' : 'full';\n    this._operationLoader = operationLoader;\n    this._operationExecutions = new Map();\n    this._network = wrapNetworkWithLogObserver(this, config.network);\n    this._getDataID = (_config$getDataID = config.getDataID) !== null && _config$getDataID !== void 0 ? _config$getDataID : defaultGetDataID;\n    this._publishQueue = new RelayPublishQueue(config.store, (_config$handlerProvid = config.handlerProvider) !== null && _config$handlerProvid !== void 0 ? _config$handlerProvid : RelayDefaultHandlerProvider, this._getDataID);\n    this._scheduler = (_config$scheduler = config.scheduler) !== null && _config$scheduler !== void 0 ? _config$scheduler : null;\n    this._store = config.store;\n    this.options = config.options;\n    this._isServer = (_config$isServer = config.isServer) !== null && _config$isServer !== void 0 ? _config$isServer : false;\n\n    this.__setNet = function (newNet) {\n      return _this._network = wrapNetworkWithLogObserver(_this, newNet);\n    };\n\n    if (process.env.NODE_ENV !== \"production\") {\n      var _require2 = require('./StoreInspector'),\n          inspect = _require2.inspect;\n\n      this.DEBUG_inspect = function (dataID) {\n        return inspect(_this, dataID);\n      };\n    }\n\n    this._missingFieldHandlers = config.missingFieldHandlers;\n    this._operationTracker = (_config$operationTrac = config.operationTracker) !== null && _config$operationTrac !== void 0 ? _config$operationTrac : new RelayOperationTracker();\n    this._reactFlightPayloadDeserializer = reactFlightPayloadDeserializer;\n    this._reactFlightServerErrorHandler = reactFlightServerErrorHandler;\n    this._shouldProcessClientComponents = config.shouldProcessClientComponents; // Register this Relay Environment with Relay DevTools if it exists.\n    // Note: this must always be the last step in the constructor.\n\n    registerEnvironmentWithDevTools(this);\n  }\n\n  var _proto = RelayModernEnvironment.prototype;\n\n  _proto.getStore = function getStore() {\n    return this._store;\n  };\n\n  _proto.getNetwork = function getNetwork() {\n    return this._network;\n  };\n\n  _proto.getOperationTracker = function getOperationTracker() {\n    return this._operationTracker;\n  };\n\n  _proto.isRequestActive = function isRequestActive(requestIdentifier) {\n    var activeState = this._operationExecutions.get(requestIdentifier);\n\n    return activeState === 'active';\n  };\n\n  _proto.UNSTABLE_getDefaultRenderPolicy = function UNSTABLE_getDefaultRenderPolicy() {\n    return this._defaultRenderPolicy;\n  };\n\n  _proto.applyUpdate = function applyUpdate(optimisticUpdate) {\n    var _this2 = this;\n\n    var dispose = function dispose() {\n      _this2._scheduleUpdates(function () {\n        _this2._publishQueue.revertUpdate(optimisticUpdate);\n\n        _this2._publishQueue.run();\n      });\n    };\n\n    this._scheduleUpdates(function () {\n      _this2._publishQueue.applyUpdate(optimisticUpdate);\n\n      _this2._publishQueue.run();\n    });\n\n    return {\n      dispose: dispose\n    };\n  };\n\n  _proto.revertUpdate = function revertUpdate(update) {\n    var _this3 = this;\n\n    this._scheduleUpdates(function () {\n      _this3._publishQueue.revertUpdate(update);\n\n      _this3._publishQueue.run();\n    });\n  };\n\n  _proto.replaceUpdate = function replaceUpdate(update, newUpdate) {\n    var _this4 = this;\n\n    this._scheduleUpdates(function () {\n      _this4._publishQueue.revertUpdate(update);\n\n      _this4._publishQueue.applyUpdate(newUpdate);\n\n      _this4._publishQueue.run();\n    });\n  };\n\n  _proto.applyMutation = function applyMutation(optimisticConfig) {\n    var subscription = this._execute({\n      createSource: function createSource() {\n        return RelayObservable.create(function (_sink) {});\n      },\n      isClientPayload: false,\n      operation: optimisticConfig.operation,\n      optimisticConfig: optimisticConfig,\n      updater: null\n    }).subscribe({});\n\n    return {\n      dispose: function dispose() {\n        return subscription.unsubscribe();\n      }\n    };\n  };\n\n  _proto.check = function check(operation) {\n    if (this._missingFieldHandlers == null || this._missingFieldHandlers.length === 0) {\n      return this._store.check(operation);\n    }\n\n    return this._checkSelectorAndHandleMissingFields(operation, this._missingFieldHandlers);\n  };\n\n  _proto.commitPayload = function commitPayload(operation, payload) {\n    this._execute({\n      createSource: function createSource() {\n        return RelayObservable.from({\n          data: payload\n        });\n      },\n      isClientPayload: true,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    }).subscribe({});\n  };\n\n  _proto.commitUpdate = function commitUpdate(updater) {\n    var _this5 = this;\n\n    this._scheduleUpdates(function () {\n      _this5._publishQueue.commitUpdate(updater);\n\n      _this5._publishQueue.run();\n    });\n  };\n\n  _proto.lookup = function lookup(readSelector) {\n    return this._store.lookup(readSelector);\n  };\n\n  _proto.subscribe = function subscribe(snapshot, callback) {\n    return this._store.subscribe(snapshot, callback);\n  };\n\n  _proto.retain = function retain(operation) {\n    return this._store.retain(operation);\n  };\n\n  _proto.isServer = function isServer() {\n    return this._isServer;\n  };\n\n  _proto._checkSelectorAndHandleMissingFields = function _checkSelectorAndHandleMissingFields(operation, handlers) {\n    var _this6 = this;\n\n    var target = RelayRecordSource.create();\n\n    var source = this._store.getSource();\n\n    var result = this._store.check(operation, {\n      handlers: handlers,\n      defaultActorIdentifier: INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n      getSourceForActor: function getSourceForActor(actorIdentifier) {\n        assertInternalActorIndentifier(actorIdentifier);\n        return source;\n      },\n      getTargetForActor: function getTargetForActor(actorIdentifier) {\n        assertInternalActorIndentifier(actorIdentifier);\n        return target;\n      }\n    });\n\n    if (target.size() > 0) {\n      this._scheduleUpdates(function () {\n        _this6._publishQueue.commitSource(target);\n\n        _this6._publishQueue.run();\n      });\n    }\n\n    return result;\n  };\n\n  _proto._scheduleUpdates = function _scheduleUpdates(task) {\n    var scheduler = this._scheduler;\n\n    if (scheduler != null) {\n      scheduler.schedule(task);\n    } else {\n      task();\n    }\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Query operation, each result of which is then\n   * normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to: environment.execute({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.execute = function execute(_ref) {\n    var _this7 = this;\n\n    var operation = _ref.operation;\n    return this._execute({\n      createSource: function createSource() {\n        return _this7.getNetwork().execute(operation.request.node.params, operation.request.variables, operation.request.cacheConfig || {}, null);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Subscription operation, each result of which is then\n   * normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to: environment.execute({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeSubscription = function executeSubscription(_ref2) {\n    var _this8 = this;\n\n    var operation = _ref2.operation,\n        updater = _ref2.updater;\n    return this._execute({\n      createSource: function createSource() {\n        return _this8.getNetwork().execute(operation.request.node.params, operation.request.variables, operation.request.cacheConfig || {}, null);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: updater\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Mutation operation, the result of which is then normalized and\n   * committed to the publish queue along with an optional optimistic response\n   * or updater.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to:\n   * environment.executeMutation({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeMutation = function executeMutation(_ref3) {\n    var _this9 = this;\n\n    var operation = _ref3.operation,\n        optimisticResponse = _ref3.optimisticResponse,\n        optimisticUpdater = _ref3.optimisticUpdater,\n        updater = _ref3.updater,\n        uploadables = _ref3.uploadables;\n    var optimisticConfig;\n\n    if (optimisticResponse || optimisticUpdater) {\n      optimisticConfig = {\n        operation: operation,\n        response: optimisticResponse,\n        updater: optimisticUpdater\n      };\n    }\n\n    return this._execute({\n      createSource: function createSource() {\n        return _this9.getNetwork().execute(operation.request.node.params, operation.request.variables, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, operation.request.cacheConfig), {}, {\n          force: true\n        }), uploadables);\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: optimisticConfig,\n      updater: updater\n    });\n  }\n  /**\n   * Returns an Observable of GraphQLResponse resulting from executing the\n   * provided Query or Subscription operation responses, the result of which is\n   * then normalized and committed to the publish queue.\n   *\n   * Note: Observables are lazy, so calling this method will do nothing until\n   * the result is subscribed to:\n   * environment.executeWithSource({...}).subscribe({...}).\n   */\n  ;\n\n  _proto.executeWithSource = function executeWithSource(_ref4) {\n    var operation = _ref4.operation,\n        source = _ref4.source;\n    return this._execute({\n      createSource: function createSource() {\n        return source;\n      },\n      isClientPayload: false,\n      operation: operation,\n      optimisticConfig: null,\n      updater: null\n    });\n  };\n\n  _proto.toJSON = function toJSON() {\n    var _this$configName;\n\n    return \"RelayModernEnvironment(\".concat((_this$configName = this.configName) !== null && _this$configName !== void 0 ? _this$configName : '', \")\");\n  };\n\n  _proto._execute = function _execute(_ref5) {\n    var _this10 = this;\n\n    var createSource = _ref5.createSource,\n        isClientPayload = _ref5.isClientPayload,\n        operation = _ref5.operation,\n        optimisticConfig = _ref5.optimisticConfig,\n        updater = _ref5.updater;\n    var publishQueue = this._publishQueue;\n    var store = this._store;\n    return RelayObservable.create(function (sink) {\n      var executor = OperationExecutor.execute({\n        actorIdentifier: INTERNAL_ACTOR_IDENTIFIER_DO_NOT_USE,\n        getDataID: _this10._getDataID,\n        isClientPayload: isClientPayload,\n        log: _this10.__log,\n        operation: operation,\n        operationExecutions: _this10._operationExecutions,\n        operationLoader: _this10._operationLoader,\n        operationTracker: _this10._operationTracker,\n        optimisticConfig: optimisticConfig,\n        getPublishQueue: function getPublishQueue(actorIdentifier) {\n          assertInternalActorIndentifier(actorIdentifier);\n          return publishQueue;\n        },\n        reactFlightPayloadDeserializer: _this10._reactFlightPayloadDeserializer,\n        reactFlightServerErrorHandler: _this10._reactFlightServerErrorHandler,\n        scheduler: _this10._scheduler,\n        shouldProcessClientComponents: _this10._shouldProcessClientComponents,\n        sink: sink,\n        // NOTE: Some product tests expect `Network.execute` to be called only\n        //       when the Observable is executed.\n        source: createSource(),\n        getStore: function getStore(actorIdentifier) {\n          assertInternalActorIndentifier(actorIdentifier);\n          return store;\n        },\n        treatMissingFieldsAsNull: _this10._treatMissingFieldsAsNull,\n        updater: updater\n      });\n      return function () {\n        return executor.cancel();\n      };\n    });\n  };\n\n  return RelayModernEnvironment;\n}(); // Add a sigil for detection by `isRelayModernEnvironment()` to avoid a\n// realm-specific instanceof check, and to aid in module tree-shaking to\n// avoid requiring all of RelayRuntime just to detect its environment.\n\n\nRelayModernEnvironment.prototype['@@RelayModernEnvironment'] = true;\n\nfunction emptyFunction() {}\n\nmodule.exports = RelayModernEnvironment;"],"mappings":"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"},"metadata":{},"sourceType":"script"}