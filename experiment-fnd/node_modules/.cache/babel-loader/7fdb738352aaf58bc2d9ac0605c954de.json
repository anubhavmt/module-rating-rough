{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _require = require('../query/GraphQLTag'),\n    getRequest = _require.getRequest;\n\nvar _require2 = require('../store/ClientID'),\n    generateUniqueClientID = _require2.generateUniqueClientID;\n\nvar isRelayModernEnvironment = require('../store/isRelayModernEnvironment');\n\nvar _require3 = require('../store/RelayModernOperationDescriptor'),\n    createOperationDescriptor = _require3.createOperationDescriptor;\n\nvar RelayDeclarativeMutationConfig = require('./RelayDeclarativeMutationConfig');\n\nvar validateMutation = require('./validateMutation');\n\nvar invariant = require('invariant');\n\nvar warning = require(\"fbjs/lib/warning\");\n/**\n * Higher-level helper function to execute a mutation against a specific\n * environment.\n */\n\n\nfunction commitMutation(environment, config) {\n  !isRelayModernEnvironment(environment) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'commitMutation: expected `environment` to be an instance of ' + '`RelayModernEnvironment`.') : invariant(false) : void 0;\n  var mutation = getRequest(config.mutation);\n\n  if (mutation.params.operationKind !== 'mutation') {\n    throw new Error('commitMutation: Expected mutation operation');\n  }\n\n  if (mutation.kind !== 'Request') {\n    throw new Error('commitMutation: Expected mutation to be of type request');\n  }\n\n  var optimisticResponse = config.optimisticResponse,\n      optimisticUpdater = config.optimisticUpdater,\n      updater = config.updater;\n  var configs = config.configs,\n      cacheConfig = config.cacheConfig,\n      onError = config.onError,\n      onUnsubscribe = config.onUnsubscribe,\n      variables = config.variables,\n      uploadables = config.uploadables;\n  var operation = createOperationDescriptor(mutation, variables, cacheConfig, generateUniqueClientID()); // TODO: remove this check after we fix flow.\n\n  if (typeof optimisticResponse === 'function') {\n    optimisticResponse = optimisticResponse();\n    process.env.NODE_ENV !== \"production\" ? warning(false, 'commitMutation: Expected `optimisticResponse` to be an object, ' + 'received a function.') : void 0;\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (optimisticResponse instanceof Object) {\n      validateMutation(optimisticResponse, mutation, variables);\n    }\n  }\n\n  if (configs) {\n    var _RelayDeclarativeMuta = RelayDeclarativeMutationConfig.convert(configs, mutation, optimisticUpdater, updater);\n\n    optimisticUpdater = _RelayDeclarativeMuta.optimisticUpdater;\n    updater = _RelayDeclarativeMuta.updater;\n  }\n\n  var errors = [];\n  var subscription = environment.executeMutation({\n    operation: operation,\n    optimisticResponse: optimisticResponse,\n    optimisticUpdater: optimisticUpdater,\n    updater: updater,\n    uploadables: uploadables\n  }).subscribe({\n    next: function next(payload) {\n      var _config$onNext;\n\n      if (Array.isArray(payload)) {\n        payload.forEach(function (item) {\n          if (item.errors) {\n            errors.push.apply(errors, (0, _toConsumableArray2[\"default\"])(item.errors));\n          }\n        });\n      } else {\n        if (payload.errors) {\n          errors.push.apply(errors, (0, _toConsumableArray2[\"default\"])(payload.errors));\n        }\n      }\n\n      (_config$onNext = config.onNext) === null || _config$onNext === void 0 ? void 0 : _config$onNext.call(config);\n    },\n    complete: function complete() {\n      var onCompleted = config.onCompleted;\n\n      if (onCompleted) {\n        var snapshot = environment.lookup(operation.fragment);\n        onCompleted(snapshot.data, errors.length !== 0 ? errors : null);\n      }\n    },\n    error: onError,\n    unsubscribe: onUnsubscribe\n  });\n  return {\n    dispose: subscription.unsubscribe\n  };\n}\n\nmodule.exports = commitMutation;","map":{"version":3,"names":["_interopRequireDefault","require","_toConsumableArray2","_require","getRequest","_require2","generateUniqueClientID","isRelayModernEnvironment","_require3","createOperationDescriptor","RelayDeclarativeMutationConfig","validateMutation","invariant","warning","commitMutation","environment","config","process","env","NODE_ENV","mutation","params","operationKind","Error","kind","optimisticResponse","optimisticUpdater","updater","configs","cacheConfig","onError","onUnsubscribe","variables","uploadables","operation","Object","_RelayDeclarativeMuta","convert","errors","subscription","executeMutation","subscribe","next","payload","_config$onNext","Array","isArray","forEach","item","push","apply","onNext","call","complete","onCompleted","snapshot","lookup","fragment","data","length","error","unsubscribe","dispose","module","exports"],"sources":["/Users/anubhavgupta/Documents/react_learning/experiment_schema_ratings/rating-frontent-with-gql/module-rating-rough/experiment-fnd/node_modules/relay-runtime/lib/mutations/commitMutation.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _require = require('../query/GraphQLTag'),\n    getRequest = _require.getRequest;\n\nvar _require2 = require('../store/ClientID'),\n    generateUniqueClientID = _require2.generateUniqueClientID;\n\nvar isRelayModernEnvironment = require('../store/isRelayModernEnvironment');\n\nvar _require3 = require('../store/RelayModernOperationDescriptor'),\n    createOperationDescriptor = _require3.createOperationDescriptor;\n\nvar RelayDeclarativeMutationConfig = require('./RelayDeclarativeMutationConfig');\n\nvar validateMutation = require('./validateMutation');\n\nvar invariant = require('invariant');\n\nvar warning = require(\"fbjs/lib/warning\");\n\n/**\n * Higher-level helper function to execute a mutation against a specific\n * environment.\n */\nfunction commitMutation(environment, config) {\n  !isRelayModernEnvironment(environment) ? process.env.NODE_ENV !== \"production\" ? invariant(false, 'commitMutation: expected `environment` to be an instance of ' + '`RelayModernEnvironment`.') : invariant(false) : void 0;\n  var mutation = getRequest(config.mutation);\n\n  if (mutation.params.operationKind !== 'mutation') {\n    throw new Error('commitMutation: Expected mutation operation');\n  }\n\n  if (mutation.kind !== 'Request') {\n    throw new Error('commitMutation: Expected mutation to be of type request');\n  }\n\n  var optimisticResponse = config.optimisticResponse,\n      optimisticUpdater = config.optimisticUpdater,\n      updater = config.updater;\n  var configs = config.configs,\n      cacheConfig = config.cacheConfig,\n      onError = config.onError,\n      onUnsubscribe = config.onUnsubscribe,\n      variables = config.variables,\n      uploadables = config.uploadables;\n  var operation = createOperationDescriptor(mutation, variables, cacheConfig, generateUniqueClientID()); // TODO: remove this check after we fix flow.\n\n  if (typeof optimisticResponse === 'function') {\n    optimisticResponse = optimisticResponse();\n    process.env.NODE_ENV !== \"production\" ? warning(false, 'commitMutation: Expected `optimisticResponse` to be an object, ' + 'received a function.') : void 0;\n  }\n\n  if (process.env.NODE_ENV !== \"production\") {\n    if (optimisticResponse instanceof Object) {\n      validateMutation(optimisticResponse, mutation, variables);\n    }\n  }\n\n  if (configs) {\n    var _RelayDeclarativeMuta = RelayDeclarativeMutationConfig.convert(configs, mutation, optimisticUpdater, updater);\n\n    optimisticUpdater = _RelayDeclarativeMuta.optimisticUpdater;\n    updater = _RelayDeclarativeMuta.updater;\n  }\n\n  var errors = [];\n  var subscription = environment.executeMutation({\n    operation: operation,\n    optimisticResponse: optimisticResponse,\n    optimisticUpdater: optimisticUpdater,\n    updater: updater,\n    uploadables: uploadables\n  }).subscribe({\n    next: function next(payload) {\n      var _config$onNext;\n\n      if (Array.isArray(payload)) {\n        payload.forEach(function (item) {\n          if (item.errors) {\n            errors.push.apply(errors, (0, _toConsumableArray2[\"default\"])(item.errors));\n          }\n        });\n      } else {\n        if (payload.errors) {\n          errors.push.apply(errors, (0, _toConsumableArray2[\"default\"])(payload.errors));\n        }\n      }\n\n      (_config$onNext = config.onNext) === null || _config$onNext === void 0 ? void 0 : _config$onNext.call(config);\n    },\n    complete: function complete() {\n      var onCompleted = config.onCompleted;\n\n      if (onCompleted) {\n        var snapshot = environment.lookup(operation.fragment);\n        onCompleted(snapshot.data, errors.length !== 0 ? errors : null);\n      }\n    },\n    error: onError,\n    unsubscribe: onUnsubscribe\n  });\n  return {\n    dispose: subscription.unsubscribe\n  };\n}\n\nmodule.exports = commitMutation;"],"mappings":"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"},"metadata":{},"sourceType":"script"}