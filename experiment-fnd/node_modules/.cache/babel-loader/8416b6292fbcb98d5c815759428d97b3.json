{"ast":null,"code":"/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar useIsMountedRef = require('./useIsMountedRef');\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar React = require('react');\n\nvar _require = require('relay-runtime'),\n    defaultCommitMutation = _require.commitMutation;\n\nvar useState = React.useState,\n    useEffect = React.useEffect,\n    useRef = React.useRef,\n    useCallback = React.useCallback;\n\nfunction useMutation(mutation) {\n  var commitMutationFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultCommitMutation;\n  var environment = useRelayEnvironment();\n  var isMountedRef = useIsMountedRef();\n  var environmentRef = useRef(environment);\n  var mutationRef = useRef(mutation);\n  var inFlightMutationsRef = useRef(new Set());\n\n  var _useState = useState(false),\n      isMutationInFlight = _useState[0],\n      setMutationInFlight = _useState[1];\n\n  var cleanup = useCallback(function (disposable) {\n    if (environmentRef.current === environment && mutationRef.current === mutation) {\n      inFlightMutationsRef.current[\"delete\"](disposable);\n\n      if (isMountedRef.current) {\n        setMutationInFlight(inFlightMutationsRef.current.size > 0);\n      }\n    }\n  }, [environment, isMountedRef, mutation]);\n  useEffect(function () {\n    if (environmentRef.current !== environment || mutationRef.current !== mutation) {\n      inFlightMutationsRef.current = new Set();\n\n      if (isMountedRef.current) {\n        setMutationInFlight(false);\n      }\n\n      environmentRef.current = environment;\n      mutationRef.current = mutation;\n    }\n  }, [environment, isMountedRef, mutation]);\n  var commit = useCallback(function (config) {\n    if (isMountedRef.current) {\n      setMutationInFlight(true);\n    }\n\n    var disposable = commitMutationFn(environment, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, config), {}, {\n      mutation: mutation,\n      onCompleted: function onCompleted(response, errors) {\n        var _config$onCompleted;\n\n        cleanup(disposable);\n        (_config$onCompleted = config.onCompleted) === null || _config$onCompleted === void 0 ? void 0 : _config$onCompleted.call(config, response, errors);\n      },\n      onError: function onError(error) {\n        var _config$onError;\n\n        cleanup(disposable);\n        (_config$onError = config.onError) === null || _config$onError === void 0 ? void 0 : _config$onError.call(config, error);\n      },\n      onUnsubscribe: function onUnsubscribe() {\n        var _config$onUnsubscribe;\n\n        cleanup(disposable);\n        (_config$onUnsubscribe = config.onUnsubscribe) === null || _config$onUnsubscribe === void 0 ? void 0 : _config$onUnsubscribe.call(config);\n      },\n      onNext: function onNext() {\n        var _config$onNext;\n\n        (_config$onNext = config.onNext) === null || _config$onNext === void 0 ? void 0 : _config$onNext.call(config);\n      }\n    }));\n    inFlightMutationsRef.current.add(disposable);\n    return disposable;\n  }, [cleanup, commitMutationFn, environment, isMountedRef, mutation]);\n  return [commit, isMutationInFlight];\n}\n\nmodule.exports = useMutation;","map":{"version":3,"names":["_interopRequireDefault","require","_objectSpread2","useIsMountedRef","useRelayEnvironment","React","_require","defaultCommitMutation","commitMutation","useState","useEffect","useRef","useCallback","useMutation","mutation","commitMutationFn","arguments","length","undefined","environment","isMountedRef","environmentRef","mutationRef","inFlightMutationsRef","Set","_useState","isMutationInFlight","setMutationInFlight","cleanup","disposable","current","size","commit","config","onCompleted","response","errors","_config$onCompleted","call","onError","error","_config$onError","onUnsubscribe","_config$onUnsubscribe","onNext","_config$onNext","add","module","exports"],"sources":["/Users/anubhavgupta/Documents/react_learning/experiment_schema_ratings/rating-frontent-with-gql/module-rating-rough/experiment-fnd/node_modules/react-relay/lib/relay-hooks/useMutation.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @emails oncall+relay\n * \n * @format\n */\n// flowlint ambiguous-object-type:error\n'use strict';\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _objectSpread2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread2\"));\n\nvar useIsMountedRef = require('./useIsMountedRef');\n\nvar useRelayEnvironment = require('./useRelayEnvironment');\n\nvar React = require('react');\n\nvar _require = require('relay-runtime'),\n    defaultCommitMutation = _require.commitMutation;\n\nvar useState = React.useState,\n    useEffect = React.useEffect,\n    useRef = React.useRef,\n    useCallback = React.useCallback;\n\nfunction useMutation(mutation) {\n  var commitMutationFn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultCommitMutation;\n  var environment = useRelayEnvironment();\n  var isMountedRef = useIsMountedRef();\n  var environmentRef = useRef(environment);\n  var mutationRef = useRef(mutation);\n  var inFlightMutationsRef = useRef(new Set());\n\n  var _useState = useState(false),\n      isMutationInFlight = _useState[0],\n      setMutationInFlight = _useState[1];\n\n  var cleanup = useCallback(function (disposable) {\n    if (environmentRef.current === environment && mutationRef.current === mutation) {\n      inFlightMutationsRef.current[\"delete\"](disposable);\n\n      if (isMountedRef.current) {\n        setMutationInFlight(inFlightMutationsRef.current.size > 0);\n      }\n    }\n  }, [environment, isMountedRef, mutation]);\n  useEffect(function () {\n    if (environmentRef.current !== environment || mutationRef.current !== mutation) {\n      inFlightMutationsRef.current = new Set();\n\n      if (isMountedRef.current) {\n        setMutationInFlight(false);\n      }\n\n      environmentRef.current = environment;\n      mutationRef.current = mutation;\n    }\n  }, [environment, isMountedRef, mutation]);\n  var commit = useCallback(function (config) {\n    if (isMountedRef.current) {\n      setMutationInFlight(true);\n    }\n\n    var disposable = commitMutationFn(environment, (0, _objectSpread2[\"default\"])((0, _objectSpread2[\"default\"])({}, config), {}, {\n      mutation: mutation,\n      onCompleted: function onCompleted(response, errors) {\n        var _config$onCompleted;\n\n        cleanup(disposable);\n        (_config$onCompleted = config.onCompleted) === null || _config$onCompleted === void 0 ? void 0 : _config$onCompleted.call(config, response, errors);\n      },\n      onError: function onError(error) {\n        var _config$onError;\n\n        cleanup(disposable);\n        (_config$onError = config.onError) === null || _config$onError === void 0 ? void 0 : _config$onError.call(config, error);\n      },\n      onUnsubscribe: function onUnsubscribe() {\n        var _config$onUnsubscribe;\n\n        cleanup(disposable);\n        (_config$onUnsubscribe = config.onUnsubscribe) === null || _config$onUnsubscribe === void 0 ? void 0 : _config$onUnsubscribe.call(config);\n      },\n      onNext: function onNext() {\n        var _config$onNext;\n\n        (_config$onNext = config.onNext) === null || _config$onNext === void 0 ? void 0 : _config$onNext.call(config);\n      }\n    }));\n    inFlightMutationsRef.current.add(disposable);\n    return disposable;\n  }, [cleanup, commitMutationFn, environment, isMountedRef, mutation]);\n  return [commit, isMutationInFlight];\n}\n\nmodule.exports = useMutation;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEA,IAAIC,cAAc,GAAGF,sBAAsB,CAACC,OAAO,CAAC,sCAAD,CAAR,CAA3C;;AAEA,IAAIE,eAAe,GAAGF,OAAO,CAAC,mBAAD,CAA7B;;AAEA,IAAIG,mBAAmB,GAAGH,OAAO,CAAC,uBAAD,CAAjC;;AAEA,IAAII,KAAK,GAAGJ,OAAO,CAAC,OAAD,CAAnB;;AAEA,IAAIK,QAAQ,GAAGL,OAAO,CAAC,eAAD,CAAtB;AAAA,IACIM,qBAAqB,GAAGD,QAAQ,CAACE,cADrC;;AAGA,IAAIC,QAAQ,GAAGJ,KAAK,CAACI,QAArB;AAAA,IACIC,SAAS,GAAGL,KAAK,CAACK,SADtB;AAAA,IAEIC,MAAM,GAAGN,KAAK,CAACM,MAFnB;AAAA,IAGIC,WAAW,GAAGP,KAAK,CAACO,WAHxB;;AAKA,SAASC,WAAT,CAAqBC,QAArB,EAA+B;EAC7B,IAAIC,gBAAgB,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoET,qBAA3F;EACA,IAAIY,WAAW,GAAGf,mBAAmB,EAArC;EACA,IAAIgB,YAAY,GAAGjB,eAAe,EAAlC;EACA,IAAIkB,cAAc,GAAGV,MAAM,CAACQ,WAAD,CAA3B;EACA,IAAIG,WAAW,GAAGX,MAAM,CAACG,QAAD,CAAxB;EACA,IAAIS,oBAAoB,GAAGZ,MAAM,CAAC,IAAIa,GAAJ,EAAD,CAAjC;;EAEA,IAAIC,SAAS,GAAGhB,QAAQ,CAAC,KAAD,CAAxB;EAAA,IACIiB,kBAAkB,GAAGD,SAAS,CAAC,CAAD,CADlC;EAAA,IAEIE,mBAAmB,GAAGF,SAAS,CAAC,CAAD,CAFnC;;EAIA,IAAIG,OAAO,GAAGhB,WAAW,CAAC,UAAUiB,UAAV,EAAsB;IAC9C,IAAIR,cAAc,CAACS,OAAf,KAA2BX,WAA3B,IAA0CG,WAAW,CAACQ,OAAZ,KAAwBhB,QAAtE,EAAgF;MAC9ES,oBAAoB,CAACO,OAArB,CAA6B,QAA7B,EAAuCD,UAAvC;;MAEA,IAAIT,YAAY,CAACU,OAAjB,EAA0B;QACxBH,mBAAmB,CAACJ,oBAAoB,CAACO,OAArB,CAA6BC,IAA7B,GAAoC,CAArC,CAAnB;MACD;IACF;EACF,CARwB,EAQtB,CAACZ,WAAD,EAAcC,YAAd,EAA4BN,QAA5B,CARsB,CAAzB;EASAJ,SAAS,CAAC,YAAY;IACpB,IAAIW,cAAc,CAACS,OAAf,KAA2BX,WAA3B,IAA0CG,WAAW,CAACQ,OAAZ,KAAwBhB,QAAtE,EAAgF;MAC9ES,oBAAoB,CAACO,OAArB,GAA+B,IAAIN,GAAJ,EAA/B;;MAEA,IAAIJ,YAAY,CAACU,OAAjB,EAA0B;QACxBH,mBAAmB,CAAC,KAAD,CAAnB;MACD;;MAEDN,cAAc,CAACS,OAAf,GAAyBX,WAAzB;MACAG,WAAW,CAACQ,OAAZ,GAAsBhB,QAAtB;IACD;EACF,CAXQ,EAWN,CAACK,WAAD,EAAcC,YAAd,EAA4BN,QAA5B,CAXM,CAAT;EAYA,IAAIkB,MAAM,GAAGpB,WAAW,CAAC,UAAUqB,MAAV,EAAkB;IACzC,IAAIb,YAAY,CAACU,OAAjB,EAA0B;MACxBH,mBAAmB,CAAC,IAAD,CAAnB;IACD;;IAED,IAAIE,UAAU,GAAGd,gBAAgB,CAACI,WAAD,EAAc,CAAC,GAAGjB,cAAc,CAAC,SAAD,CAAlB,EAA+B,CAAC,GAAGA,cAAc,CAAC,SAAD,CAAlB,EAA+B,EAA/B,EAAmC+B,MAAnC,CAA/B,EAA2E,EAA3E,EAA+E;MAC5HnB,QAAQ,EAAEA,QADkH;MAE5HoB,WAAW,EAAE,SAASA,WAAT,CAAqBC,QAArB,EAA+BC,MAA/B,EAAuC;QAClD,IAAIC,mBAAJ;;QAEAT,OAAO,CAACC,UAAD,CAAP;QACA,CAACQ,mBAAmB,GAAGJ,MAAM,CAACC,WAA9B,MAA+C,IAA/C,IAAuDG,mBAAmB,KAAK,KAAK,CAApF,GAAwF,KAAK,CAA7F,GAAiGA,mBAAmB,CAACC,IAApB,CAAyBL,MAAzB,EAAiCE,QAAjC,EAA2CC,MAA3C,CAAjG;MACD,CAP2H;MAQ5HG,OAAO,EAAE,SAASA,OAAT,CAAiBC,KAAjB,EAAwB;QAC/B,IAAIC,eAAJ;;QAEAb,OAAO,CAACC,UAAD,CAAP;QACA,CAACY,eAAe,GAAGR,MAAM,CAACM,OAA1B,MAAuC,IAAvC,IAA+CE,eAAe,KAAK,KAAK,CAAxE,GAA4E,KAAK,CAAjF,GAAqFA,eAAe,CAACH,IAAhB,CAAqBL,MAArB,EAA6BO,KAA7B,CAArF;MACD,CAb2H;MAc5HE,aAAa,EAAE,SAASA,aAAT,GAAyB;QACtC,IAAIC,qBAAJ;;QAEAf,OAAO,CAACC,UAAD,CAAP;QACA,CAACc,qBAAqB,GAAGV,MAAM,CAACS,aAAhC,MAAmD,IAAnD,IAA2DC,qBAAqB,KAAK,KAAK,CAA1F,GAA8F,KAAK,CAAnG,GAAuGA,qBAAqB,CAACL,IAAtB,CAA2BL,MAA3B,CAAvG;MACD,CAnB2H;MAoB5HW,MAAM,EAAE,SAASA,MAAT,GAAkB;QACxB,IAAIC,cAAJ;;QAEA,CAACA,cAAc,GAAGZ,MAAM,CAACW,MAAzB,MAAqC,IAArC,IAA6CC,cAAc,KAAK,KAAK,CAArE,GAAyE,KAAK,CAA9E,GAAkFA,cAAc,CAACP,IAAf,CAAoBL,MAApB,CAAlF;MACD;IAxB2H,CAA/E,CAAd,CAAjC;IA0BAV,oBAAoB,CAACO,OAArB,CAA6BgB,GAA7B,CAAiCjB,UAAjC;IACA,OAAOA,UAAP;EACD,CAjCuB,EAiCrB,CAACD,OAAD,EAAUb,gBAAV,EAA4BI,WAA5B,EAAyCC,YAAzC,EAAuDN,QAAvD,CAjCqB,CAAxB;EAkCA,OAAO,CAACkB,MAAD,EAASN,kBAAT,CAAP;AACD;;AAEDqB,MAAM,CAACC,OAAP,GAAiBnC,WAAjB"},"metadata":{},"sourceType":"script"}